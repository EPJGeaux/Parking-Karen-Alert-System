<!DOCTYPE html>
<html>
<head>
  <title>Karen Alert System ðŸš¨</title>
  <style>
    body { font-family: sans-serif; text-align:center; padding: 20px; background-color: #fefefe; }
    #log { max-width: 600px; margin: 20px auto; text-align:left; border-top: 1px solid #ccc; padding-top: 10px; }
    .entry { margin-bottom: 10px; padding:5px; border-bottom:1px dotted #aaa; }
    .entry.karen { background-color: #ffe6e6; }
  </style>
</head>
<body>
  <h1>Karen Alert System ðŸš¨</h1>
  <p>Monitoring <b>1062 Cheshire Ln, Houston, TX 77018</b> for 311 complaintsâ€¦</p>
  <div id="log"></div>

  <script>
    // Houston Open Data API for 311 Service Requests
    const apiURL = "https://data.houstontx.gov/resource/7x3i-zuj1.json?address=1062 Cheshire Ln";

    const logDiv = document.getElementById('log');
    const seen = new Set();

    function checkForKarens() {
      fetch(apiURL)
        .then(res => res.json())
        .then(data => {
          data.forEach(f => {
            const id = f.service_request_id; // Unique ID from dataset

            if (!seen.has(id)) {
              seen.add(id);

              // Pop-up alert
              alert("ðŸš¨ KAREN ALERT! Someone snitched on 1062 Cheshire Ln ðŸš¨");

              // Add entry to log
              const entry = document.createElement('div');
              entry.className = "entry karen";
              entry.innerHTML = `
                <b>${f.sr_type || "Unknown Complaint"}</b><br>
                Status: ${f.status || "Unknown"}<br>
                Address: ${f.address || ""}<br>
                Reported: ${f.created_date || ""}
              `;
              logDiv.prepend(entry);

              // Optional: play funny alarm sound
              // new Audio('https://www.myinstants.com/media/sounds/alarm.mp3').play();
            }
          });
        })
        .catch(err => console.error("API Error:", err));
    }

    // Check every 30 seconds
    setInterval(checkForKarens, 30000);
    checkForKarens();
  </script>
</body>
</html>
