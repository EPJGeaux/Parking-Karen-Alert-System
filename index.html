<!DOCTYPE html>
<html>
<head>
  <title>Karen Alert System ðŸš¨</title>
  <style>
    body { font-family: sans-serif; text-align:center; padding: 20px; }
    #log { max-width: 600px; margin: auto; text-align:left; }
  </style>
</head>
<body>
  <h1>Karen Alert System ðŸš¨</h1>
  <p>Monitoring 1062 Cheshire Ln for reportsâ€¦</p>
  <div id="log"></div>

  <script>
    const apiURL = "https://mycity2.houstontx.gov/pubgis01/rest/services/311/Houston311_RecentServiceRequests/FeatureServer/0/query?where=address like '%1062 Cheshire Ln%'&outFields=*&f=json";

    let seen = new Set();
    const logDiv = document.getElementById('log');

    function checkForKarens() {
      fetch(apiURL)
        .then(res => res.json())
        .then(data => {
          data.features.forEach(f => {
            const id = f.attributes.service_request_id;

            if (!seen.has(id)) {
              seen.add(id);

              // Hilarious alert
              alert("ðŸš¨ KAREN ALERT! Someone snitched on 1062 Cheshire Ln ðŸš¨");

              // Add entry to log
              const entry = document.createElement('div');
              entry.innerHTML = `<b>${f.attributes.sr_type || "Unknown Complaint"}</b> - Status: ${f.attributes.status || "Unknown"}<br>${f.attributes.address || ""}<hr>`;
              logDiv.prepend(entry);
            }
          });
        })
        .catch(err => console.error("API Error:", err));
    }

    // Check every 30 seconds
    setInterval(checkForKarens, 30000);
    checkForKarens();
  </script>
</body>
</html>
